[TOC]

# 网络流

#### 快速复习

##### 1. 最大流问题

​	最大流问题（Maximum-Flow Problem）是指这样的一个问题：在一张有向图中，假设需要把一些物品从结点 $s$（源点）运送到结点 $t$（汇点），可以从其它结点中转。每条有向边表示最多能有多少个物品从这条边的起点运送到终点，问最多能把多少物品从源点送到汇点？

​	对于一条边 (u, v)，它的物品上限称为==**容量**==（capacity），记为 c(u, v)。对于不存在的边，其容量为 0。实际运送的物品数量称为==**流量**==（flow），记为 f(u, v)。

​	在最大流问题中，要求满足三个性质：

（1）==**容量限制**==
$$
f(u, v) \le c(u, v)
$$
（2）==**斜对称性**==
$$
f(u, v) = -f(v, u)
$$
（3）==**流量平衡**==

​	对 $\forall u \in V - \{ s, t \}$，有：
$$
\sum _{(u, v) \in E} f(u, v) = 0
$$


​	我们的问题实际上是求：
$$
\max \{ \sum_{(s, v) \in E} f(s, v) \} = \max \{ \sum_{(u, t) \in E} f(u, t) \}
$$

##### 2. 增广路算法

###### ①残量网络

​	计算出每条边上的容量和流量之差（称为==**残余流量**==，简称==**残量**==），得到==**残量网络**==（residual network）。**残量网络的边数可能达到原图边数的两倍。**

###### ②增广路定理

​	残量网络中的任何一条从 $s$ 到 $t$ 的有向道路都对应一条原图中的==**增广路**==（augmenting path）。只要求出增广路中所有残量的最小值 $d$，把对应的所有边上的流量增加 $d$，就能使总流量增加 $d$，这个过程称为==**增广**==（augmenting）。

​	==**增广路定理**==指，只要残量网络中存在增广路，流量就可以增大；如果残量网络中不存在增广路，则当前流就是最大流。

###### ③最短增广路方法

​	通过不断找到增广路进行增广，最终找到最大流的方法，称之为 ==**Ford-Fulkerson 方法**==。

​	最短增广路算法指，每次沿着边数最少点的增广进行增广，可以证明，这样最多需要 $O(nm)$ 次增广。

​	如果使用 BFS 来实现，每次需要 $O(m)$ 的时间，总时间复杂度为 $O(nm^2)$，这个算法叫做 ==**Edmonds Karp 算法**==。

###### ④存边方法

​	对于最大流问题的边，要保存 4 个参数：

```c++
struct Edge
{
	int from, to, cap, flow;
}
```

​	保存边时，使用 vector 加上边集数组保存：

```c++
std::vector<Edge> edges;
std::vector<std::vector<int> > G;
```

