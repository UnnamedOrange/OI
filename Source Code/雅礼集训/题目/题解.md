##### Day1 T1

- [x] Prüfer 序列，动态规划

  ​首先要知道 Prüfer 定理。然后考虑使用**计数型动态规划**。

  ​设 $f_{i, j, k}$ 表示在前 i 个数中有 j 个作为**候选名单**并且在这个候选名单中选了 $k + 2$ 个点组成了长度为 k 的 Prüfer 序列。

  ​初始时 $f_{0, 0, 0} = 1$。**由于边界情况比较复杂，所以考虑“我为人人”的动规方式。**

  考虑 $f_{i, j, k}$ 对答案的贡献。若不把第 i + 1 个数考虑进候选名单，那么会给 $f_{i + 1, j, k}$ 有 $f_{i, j, k}$ 的贡献。

  ​若考虑进候选名单，那么会给 $f_{i + 1, j + 1, k + c}$ 有贡献，这里的 c 由枚举得来，要求满足度数要求（$c < a_{i + 1}$），并且满足 Prüfer 序列的要求（$k + c \le n - 2$）。

  考虑公式 $\frac {n!} {(a_1 - 1)!(a_2 - 1)! \, ... \, (a_n - 1)!}$。我们先让 DP 数组中保存的树除以 $n!$，因此我们实际保存的是 $\frac {1} {(a_1 - 1)!(a_2 - 1)! \, ... \, (a_n - 1)!}$ **的和**。这样看上去就没有什么大的实际意义了，但我们知道，**新的和的每一项的形式是 $\frac {1} {(a_1 - 1)!(a_2 - 1)! \, ... \, (a_n - 1)!(a_{n + 1} - 1)!}$**，所以我们只需要索性让 $f_{i, j, k}$ 对 $f_{i + 1, j + 1, k + c}$ 有 $\frac {f_{i, j, k}} {c!}$ 的贡献就可以了。

  ​最后还要再把 $(n - 2)!$ 乘回来，因此选 i 个作为候选名单的答案为 $f_{n, i, i - 2} * (i - 2)!$。

  注意：这里不把 $n!$ 保存在 DP 数组中只是为了方便，但同时这样改变了我们所保存的东西的意义。如果要退回原意的话，还得再做一个连续乘法，造成了不必要的麻烦。

##### Day1 T2

- [x] 简单博弈，动态规划

      **树上的博弈可以考虑子树上的情况。**

      考虑状态的设计。**经验告诉我们，状态可以有四种：红必胜，蓝必胜，先手胜，后手胜。**对于这道题而言，我们需要三种状态：红必胜，蓝必胜和先手胜。

      **考虑从叶节点开始，推广到子树，再推广到整棵树。**一开始，叶节点的状态时已知的：红色结点为红必胜，蓝色结点为蓝必胜，无色结点为先手胜。**然后考虑将操作限定在子树，**接下来就会很明显的发现，当红色结点个数大于蓝色结点个数时，红必胜；反之蓝必胜；否则先手胜。

      **基于这么个事实：假设有一个红必胜的不在当前子树，而蓝色想要去挽回，那么蓝色就要去那里选择一个结点。但是红色的可以进行“模仿”，因此一切挽回都是徒劳的。**所以，状态就限定在了子树中。接下来考虑如何通过子树来推断上一级结点。只需要把红必胜的子树看作红色，蓝必胜的子树看成蓝色，先手胜的结点看作无色就是了。**因为最终它们都会变成它们应有的颜色。**

      最终，问题 1 的答案就是根结点的状态。若根结点的状态为红必胜或先手胜则有解，否则无解。

      考虑第 2 问，我们不如换一种状态设计。设红必胜子树的权值为 1，蓝必胜子树的权值为 -1，先手胜的权值为 0，则结点的状态为 $\sum 子树权值$。不难发现，$f_i = 0$ 对于上面的先手胜，$f_i > 0$ 对应红必胜，$f_i < 0$ 对应蓝必胜。而且这种描述方式**更精确了**。


      考虑红方怎么赢。如果是红必胜，随便选一个点就好了。如果是先手胜，现在红方要选一个点，然后就成了后手了。**因此唯一的方式是这一个点使当前根结点的局面由先手胜转变为红必胜。**

