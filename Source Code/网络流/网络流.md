[TOC]

# 前言

​	漫无目的地做题还是做不来，痛心疾首，决定还是照着紫书和蓝书上的例题和习题去刷。

​	Tip：想要连上 UVa 基本是不可能的了，使用 [Virtual Judge](https://cn.vjudge.net/) 即可，相当好用。

# 网络流

#### 速记

##### 矩阵与二分图的转换

​	矩阵常常可以转换为二分图：每一行代表 X 部中的一个点，每一列代表 Y 部中的一个点。

#####拆点法

​	把点拆成两个，然后中间连一条边。

#### 题目列表

#####e.g. [UVa 753 Unix 插头](https://cn.vjudge.net/problem/UVA-753)

​	一种容易想到的建图方式是，既然转换器个数不限，那就直接连一条容量为无穷大的边。然后就想到源点连向设备对应的插头（设备的名称其实没有用），各个插头对应的插座连向汇点，容量均为 1。这么做很明显是对的，**如果**使用 EK 算法，增广一次就相当于插上了一个插头。

​	另外一种建图方式是，直接源点向设备连边，插座向汇点连边，容量均为 1。如果设备能用某种方式匹配到某个插座，就连一条容量为无穷大的边。

​	我觉得第一种方式好想一点，好写一点，甚至还要快一点。第二种建图方式还要用 Floyd 计算传递闭包。

#####e.g. [UVa 11082 矩阵解压](https://cn.vjudge.net/problem/UVA-11082)

​	这道题需要用到二分图来建模：将每一行用 X 部的一个点表示，每一列用 Y 部的一个点表示。==**可以用 X 部的点向 Y 部的点连边，用边的流量代表 $a_{x, y}$。**==由于每个位置的值不超过 20，所以边的容量应该为 20。

​	由于题目已经给定了每一行和每一列的和，因此源点向 X 部的每个点连一条容量为对应行的和的边，Y 部的每个点向汇点连一条容量为对应列的和的边。不难发现，如果这两种边每条边都是满载的，就说明问题有解，对应位置的答案为  X 部向 Y 部连的边的流量。

​	但是有一个问题：规定每个位置的最小值为 1，而像上面这么做可能会有流量为 0 的边。解决方法也很简单：干脆让矩阵中的每个数都减去 1，相应的其它地方也要发生改变，最后答案再加回来就可以了。

##### e.g. [UVa 1658 海军上将](https://cn.vjudge.net/problem/UVA-1658)

​	可以考虑最小费用最大流，边只能经过一次，就把容量设为 1，费用设为边权。但是点也只能经过一次，所以可以拆点，把点换成一条容量为 1，费用为 0 的边即可。

##### e.g. [UVa 1515 修水塘](https://cn.vjudge.net/problem/UVA-1515)

​	典型的==**最小割模型**==。

​	题目大概可以抽象成这么个问题：给定一张图，有两种结点，可以花费一定代价互相转化，有些结点不能转换。每对相邻的不同结点需要花费一定代价。问最小总代价？

​	再抽象一点，可以这样考虑：将所有结点分成**两个集合**，不同的分法按题意有不同的总代价，求最小总代价？

​	放到网络流上，就可以转换为最小割问题了。我们现在的任务是，==**如何用割边的容量来代表代价。**==

​	为了方便，我们==**规定**==源点所在集合的结点类型为草地，让汇点所在集合的结点类型为洞。

​	如何表示一个结点一定为草地？只需要==**从源点向它连一条容量为无穷大的边。**==如果最小割最后不是无穷大，那么一定不会割这条边，换句话说这么做之后这个点和源点始终是在同一集合内的。

​	如何表示一个结点发生了类型转换？假设这个结点为草地。如果我们要转换为洞，那么源点和这个结点就不在同一集合内。此时，如果源点到结点有边，这条边就是割边。同理，如果我们不转换，源点到结点的边就不是割边。==**所以我们从源点向它连一条容量为转换为洞的代价的边。**==一开始为洞的结点同理，从它向汇点连一条容量为转换为草地的代价的边。

​	如何表示相邻的两个不同类型的结点需要花费一定代价？只需要==**连一条容量为修篱笆的代价的无向边（两条有向边）。**==如果这两个结点在相同集合，就没有割边，否则无论哪个在 $S$ 哪个在 $T$，始终都会有一条割边。